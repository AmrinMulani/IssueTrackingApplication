<app-nav>
    <div class="container col-lg-12 col-md-12 col-sm-12 mt-5">
        <div *ngIf="createForm.dirty" class="alert alert-info">
            <strong>Information:</strong> You have made some changes. Any unsaved changes will be lost!
        </div>
        <form #createForm="ngForm" id="createForm" (ngSubmit)="saveData()">
            <div class="form-group">
                <label for="title">Title</label>
                <input type="text" name="title" [(ngModel)]="issue.title" #title="ngModel" [ngClass]="title.valid && (title.dirty || title.touched) ? 'is-valid' : 'is-invalid'" required class="form-control" id="title" placeholder="Enter title of the issue">
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea rows="15" name="description" class="form-control" [froalaEditor]="options" #description="ngModel" [ngClass]="description.valid && (description.dirty || description.touched) ? 'is-valid' : 'is-invalid'" required [(ngModel)]="issue.description"
                    id="description" placeholder="Enter description of the issue"></textarea>
            </div>

            <div class="form-group">
                <label for="assignee">Assignee</label>

                <select name="assignee" [(ngModel)]="issue.assignee" required class="form-control" id="assignee">
                <option *ngFor="let category of allUsers" [value]="category._id"> {{category.name | uppercase}}</option>
              </select>
            </div>
            <div class="form-group">
                <label for="fileUpload">Attachments</label>
                <input type="file" name="attachment" [(ngModel)]="issue.attachment" required multiple class="form-control-file" id="attachment">
            </div>

            <div class="form-group">
                <div class="row">
                    <div class="col-sm-2" *ngFor="let photo of attachment">
                        <img src="http://localhost:3000/{{photo}}" (click)="openModal(photo, template)" class="img-thumbnail p-1" alt="">
                        <div class="text-center">
                            <!-- <button class="btn btn-sm mr-1" (click)="setMainPhoto(photo)" [disabled]="photo.isMain" [ngClass]="photo.isMain ? 'btn-success active' : 'btn-secondary'">Main</button> -->
                            <button class="btn btn-sm btn-danger" (click)="deletePhoto(photo)"><i class="fa fa-trash-o"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" [disabled]="!createForm.dirty || !createForm.valid">Submit</button>
        </form>
    </div>

</app-nav>

<ng-template #template>
    <div class="modal-header">
        <h4 class="modal-title pull-left"></h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                  <span aria-hidden="true">&times;</span>
            </button>
    </div>
    <div class="modal-body">
        <img src="{{photo}}" class="img-fluid" alt="">
    </div>
    <!-- <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                ...asdasdasdas asdas das...asdasdasdas asdas das...asdasdasdas asdas das ...asdasdasdas asdas das...asdasdasdas asdas das ...asdasdasdas asdas das ...asdasdasdas asdas das ...asdasdasdas asdas das ...asdasdasdas asdas das

            </div>
        </div>
    </div> -->
</ng-template>
<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="small" color="#e95420" type="ball-spin-clockwise-fade-rotating">
    <p style="font-size: 14px; color: #ccc">Loading...</p>
</ngx-spinner>